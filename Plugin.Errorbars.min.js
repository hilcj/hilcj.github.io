!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],a):e.PluginErrorbars=a(e.Chart)}(this,function(e){"use strict";var a={color:void 0,width:10,lineWidth:2,absoluteValues:!1},t={id:"chartJsPluginErrorBars",_getBarchartBaseCoords:function(e){var a=[];return e.data.datasets.forEach(function(t,r){var o=e.getDatasetMeta(r).data,l=t.data;a.push(o.map(function(a,t){return{label:a._model.label?a._model.label:e.data.labels[t],value:l[t],x:a._model.x,y:a._model.y,color:a._model.borderColor}}))}),a},_isHorizontal:function(e){return"horizontalBar"===e.config.type},_computeWidth:function(e,a,t){var r=t.width,o=r;try{if("string"==typeof r)if(r.match(/px/))o=parseInt(r.replace(/px/,""),10);else{var l=Math.min(100,Math.abs(Number(r.replace(/%/,"")))),n=e.getDatasetMeta(0).data[0]._model;"line"===e.config.type?o=parseInt(n.controlPointPreviousX+n.controlPointNextX,10):a?o=parseInt(n.height,10):a||(o=parseInt(n.width,10)),o*=l/100}}catch(e){console.error(e)}finally{Number.isNaN(o)&&(o=t.width)}return o},_drawErrorBar:function(e,a,t,r,o,l,n,i){e.save(),e.lineWidth=n,e.strokeStyle=o,e.beginPath(),i?(e.moveTo(r,a.y-l/2),e.lineTo(r,a.y+l/2),e.moveTo(r,a.y),e.lineTo(t,a.y),e.moveTo(t,a.y-l/2),e.lineTo(t,a.y+l/2)):(e.moveTo(a.x-l/2,t),e.lineTo(a.x+l/2,t),e.moveTo(a.x,t),e.lineTo(a.x,r),e.moveTo(a.x-l/2,r),e.lineTo(a.x+l/2,r)),e.stroke(),e.restore()},afterDraw:function(e,t,r){var o=this;if(e.__renderedOnce=e.__renderedOnce||1===t,e.__renderedOnce){r=Object.assign({},a,r);var l=e.data.datasets.map(function(e){return e.errorBars}),n=this._getBarchartBaseCoords(e);if(n&&n[0]&&n[0][0]&&l){var i=this._isHorizontal(e),s=i?e.scales["x-axis-0"]:e.scales["y-axis-0"],u=this._computeWidth(e,i,r),c=e.ctx;c.save(),n.forEach(function(e,a){e.forEach(function(e){var t=l[a];if(t){var n=t.hasOwnProperty(e.label),d=null;if(n?d=t[e.label]:!n&&e.label&&e.label.label&&t.hasOwnProperty(e.label.label)&&(d=t[e.label.label]),d){var h=r.color?r.color:e.color,f=s.getRightValue(e.value),b=r.absoluteValues?Math.abs(d.plus):f+Math.abs(d.plus),p=r.absoluteValues?Math.abs(d.minus):f-Math.abs(d.minus),m=s.getPixelForValue(b),v=s.getPixelForValue(p);o._drawErrorBar(c,e,m,v,h,u,r.lineWidth,i)}}})}),c.restore()}}}};return(e=e&&e.hasOwnProperty("default")?e.default:e).pluginService.register(t),t});